<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>datasplash.api documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Datasplash</span> <span class="project-version">0.2.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datasplash</span></div></div></li><li class="depth-2 branch current"><a href="datasplash.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-2"><a href="datasplash.bq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bq</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="datasplash.api.html#var-cogroup"><div class="inner"><span>cogroup</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-cogroup-by"><div class="inner"><span>cogroup-by</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-combine"><div class="inner"><span>combine</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-combine-by"><div class="inner"><span>combine-by</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-combine-fn"><div class="inner"><span>combine-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-concat"><div class="inner"><span>concat</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-context"><div class="inner"><span>context</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-count-fn"><div class="inner"><span>count-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-defoptions"><div class="inner"><span>defoptions</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-distinct"><div class="inner"><span>distinct</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-filter"><div class="inner"><span>filter</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-flatten"><div class="inner"><span>flatten</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-frequencies"><div class="inner"><span>frequencies</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-frequencies-fn"><div class="inner"><span>frequencies-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-from-edn"><div class="inner"><span>from-edn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-generate-input"><div class="inner"><span>generate-input</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-get-pipeline-configuration"><div class="inner"><span>get-pipeline-configuration</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-group-by"><div class="inner"><span>group-by</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-group-by-key"><div class="inner"><span>group-by-key</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-identity"><div class="inner"><span>identity</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-join-by"><div class="inner"><span>join-by</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-juxt"><div class="inner"><span>juxt</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-key"><div class="inner"><span>key</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-make-kv"><div class="inner"><span>make-kv</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-make-kv-coder"><div class="inner"><span>make-kv-coder</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-make-nippy-coder"><div class="inner"><span>make-nippy-coder</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-make-partition-mapping"><div class="inner"><span>make-partition-mapping</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-make-pipeline"><div class="inner"><span>make-pipeline</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-map"><div class="inner"><span>map</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-map-kv"><div class="inner"><span>map-kv</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-mapcat"><div class="inner"><span>mapcat</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-max-fn"><div class="inner"><span>max-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-mean-fn"><div class="inner"><span>mean-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-min-fn"><div class="inner"><span>min-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-pardo"><div class="inner"><span>pardo</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-partition-by"><div class="inner"><span>partition-by</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-partition-fn"><div class="inner"><span>partition-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-ptransform"><div class="inner"><span>ptransform</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-read-edn-file"><div class="inner"><span>read-edn-file</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-read-json-file"><div class="inner"><span>read-json-file</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-read-text-file"><div class="inner"><span>read-text-file</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-run-pipeline"><div class="inner"><span>run-pipeline</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-sample"><div class="inner"><span>sample</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-sfn"><div class="inner"><span>sfn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-side-inputs"><div class="inner"><span>side-inputs</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-sum-fn"><div class="inner"><span>sum-fn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-to-edn"><div class="inner"><span>to-edn</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-val"><div class="inner"><span>val</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-view"><div class="inner"><span>view</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-walk-gcs-tree"><div class="inner"><span>walk-gcs-tree</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-with-keys"><div class="inner"><span>with-keys</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-write-edn-file"><div class="inner"><span>write-edn-file</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-write-edn-file-by"><div class="inner"><span>write-edn-file-by</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-write-json-file"><div class="inner"><span>write-json-file</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-write-text-file"><div class="inner"><span>write-text-file</span></div></a></li><li class="depth-1"><a href="datasplash.api.html#var-write-text-file-by"><div class="inner"><span>write-text-file-by</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">datasplash.api</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-cogroup"><h3>cogroup</h3><div class="usage"><code>(cogroup specs options pcolls)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1122">view source</a></div></div><div class="public anchor" id="var-cogroup-by"><h3>cogroup-by</h3><div class="usage"><code>(cogroup-by options specs reduce-fn)</code><code>(cogroup-by options specs)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1128">view source</a></div></div><div class="public anchor" id="var-combine"><h3>combine</h3><div class="usage"><code>(combine f {:keys [coder key-coder value-coder], :as options} pcoll)</code><code>(combine f pcoll)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1246">view source</a></div></div><div class="public anchor" id="var-combine-by"><h3>combine-by</h3><div class="usage"><code>(combine-by key-fn f options pcoll)</code><code>(combine-by key-fn f pcoll)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1281">view source</a></div></div><div class="public anchor" id="var-combine-fn"><h3>combine-fn</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(combine-fn reducef extractf combinef initf output-coder acc-coder)</code><code>(combine-fn reducef extractf combinef initf output-coder)</code><code>(combine-fn reducef extractf combinef initf)</code><code>(combine-fn reducef extractf combinef)</code><code>(combine-fn reducef extractf)</code><code>(combine-fn reducef)</code></div><div class="doc"><pre class="plaintext">Returns a CombineFn instance from given args. See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Combine.CombineFn.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Combine.CombineFn.html</a>
</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L451">view source</a></div></div><div class="public anchor" id="var-concat"><h3>concat</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(concat options &amp; colls)</code></div><div class="doc"><pre class="plaintext">Returns a single PCollection containing all the given pcolls. Accepts an option map as an optional first arg.

Example:
  (ds/concat pcoll1 pcoll2)
  (ds/concat {:name :concat-node} pcoll1 pcoll2)</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1212">view source</a></div></div><div class="public anchor" id="var-context"><h3>context</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(context)</code></div><div class="doc"><pre class="plaintext">In the context of a ParDo, contains the corresponding Context object.
See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/DoFn.ProcessContext.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/DoFn.ProcessContext.html</a></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L173">view source</a></div></div><div class="public anchor" id="var-count-fn"><h3>count-fn</h3><div class="usage"><code>(count-fn &amp; {:keys [mapper predicate], :or {mapper (fn [_] 1), predicate (constantly true)}})</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1289">view source</a></div></div><div class="public anchor" id="var-defoptions"><h3>defoptions</h3><h4 class="type">macro</h4><div class="usage"><code>(defoptions interface-name specs)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/options.clj#L23">view source</a></div></div><div class="public anchor" id="var-distinct"><h3>distinct</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(distinct options pcoll)</code><code>(distinct pcoll)</code></div><div class="doc"><pre class="plaintext">Removes duplicate element from PCollection.
See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/RemoveDuplicates.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/RemoveDuplicates.html</a>
  Example:
    (ds/distinct pcoll)

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1164">view source</a></div></div><div class="public anchor" id="var-filter"><h3>filter</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(filter pred pcoll)</code><code>(filter f options pcoll)</code></div><div class="doc"><pre class="plaintext">Returns a PCollection that only contains the items for which (pred item)
returns true.

  Example:

    (ds/filter even? foo)
    (ds/filter (fn [x] (even? (* x x))) foo)

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.
:name =&gt; Adds a name to the Transform.
:side-inputs =&gt; Adds a map of PCollectionViews as side inputs to the underlying ParDo Transform. They can be accessed there by key in the return of side-inputs fn.
:without-coercion-to-clj =&gt; Avoids coercing Dataflow types to Clojure, like KV. Coercion will happen by default</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L415">view source</a></div></div><div class="public anchor" id="var-flatten"><h3>flatten</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(flatten options pcoll)</code><code>(flatten pcoll)</code></div><div class="doc"><pre class="plaintext">Returns a single Pcollection containing all the pcolls in the given pcolls iterable.
See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Flatten.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Flatten.html</a>

  Example:
    (ds/flatten [pcoll1 pcoll2 pcoll3])</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1200">view source</a></div></div><div class="public anchor" id="var-frequencies"><h3>frequencies</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(frequencies options pcoll)</code><code>(frequencies pcoll)</code></div><div class="doc"><pre class="plaintext">Returns the frequency of each unique element of the input PCollection.
See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Count.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Count.html</a>

  Example:

    (ds/frequencies pcoll)

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1371">view source</a></div></div><div class="public anchor" id="var-frequencies-fn"><h3>frequencies-fn</h3><div class="usage"><code>(frequencies-fn &amp; {:keys [mapper predicate], :or {mapper identity, predicate (constantly true)}})</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1358">view source</a></div></div><div class="public anchor" id="var-from-edn"><h3>from-edn</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L520">view source</a></div></div><div class="public anchor" id="var-generate-input"><h3>generate-input</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(generate-input coll options p)</code><code>(generate-input coll p)</code></div><div class="doc"><pre class="plaintext">Generates a pcollection from the given collection.
See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Create.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Create.html</a>

  Example:
    (ds/generate-input (range 0 1000) pipeline)

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L429">view source</a></div></div><div class="public anchor" id="var-get-pipeline-configuration"><h3>get-pipeline-configuration</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(get-pipeline-configuration p)</code><code>(get-pipeline-configuration)</code></div><div class="doc"><pre class="plaintext">Returns a map corresponding to the bean of options. With arity one, can be called on a Pipeline. With arity zero, returns the same thing inside a ParDo.
</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L748">view source</a></div></div><div class="public anchor" id="var-group-by"><h3>group-by</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(group-by f {:keys [key-coder value-coder coder], :as options} pcoll)</code><code>(group-by f pcoll)</code></div><div class="doc"><pre class="plaintext">Groups a Pcollection by the result of calling (f item) for each item.
This produces a sequence of KV values, similar to using seq with a
map. Each value will be a list of the values that match key.

  Example:

    (ds/group-by :a foo)
    (ds/group-by count foo)

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L647">view source</a></div></div><div class="public anchor" id="var-group-by-key"><h3>group-by-key</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(group-by-key {:keys [key-coder value-coder coder], :as options} pcoll)</code><code>(group-by-key pcoll)</code></div><div class="doc"><pre class="plaintext">Takes a KV PCollection as input and returns a KV PCollection as output of K to list of V.
See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/GroupByKey.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/GroupByKey.html</a></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L620">view source</a></div></div><div class="public anchor" id="var-identity"><h3>identity</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(identity c)</code></div><div class="doc"><pre class="plaintext">Identity function for use in a ParDo
</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L251">view source</a></div></div><div class="public anchor" id="var-join-by"><h3>join-by</h3><div class="usage"><code>(join-by options specs join-fn)</code><code>(join-by specs join-fn)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1153">view source</a></div></div><div class="public anchor" id="var-juxt"><h3>juxt</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(juxt &amp; fns)</code></div><div class="doc"><pre class="plaintext">Creates a CombineFn that applies multiple combiners in one go. Produces a vector of combined results.
&apos;sibling fusion&apos; in Dataflow optimizes multiple independant combiners in the same way, but you might find juxt more concise.
Only works with functions created with combine-fn or native clojure functions, and not with native Dataflow CombineFn

  Example:
    (ds/combine (ds/juxt + *) pcoll)</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L566">view source</a></div></div><div class="public anchor" id="var-key"><h3>key</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(key elt)</code></div><div class="doc"><pre class="plaintext">Returns the key part of a KV or MapEntry.
</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L125">view source</a></div></div><div class="public anchor" id="var-make-kv"><h3>make-kv</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(make-kv k v)</code><code>(make-kv kv)</code></div><div class="doc"><pre class="plaintext">Returns a KV object from the given arg(s), either [k v] or a MapEntry or seq of two elements.
</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L118">view source</a></div></div><div class="public anchor" id="var-make-kv-coder"><h3>make-kv-coder</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(make-kv-coder k-coder v-coder)</code><code>(make-kv-coder)</code></div><div class="doc"><pre class="plaintext">Returns an instance of a KvCoder using by default nippy for serialization.
</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L273">view source</a></div></div><div class="public anchor" id="var-make-nippy-coder"><h3>make-nippy-coder</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(make-nippy-coder)</code></div><div class="doc"><pre class="plaintext">Returns an instance of a CustomCoder using nippy for serialization
</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L257">view source</a></div></div><div class="public anchor" id="var-make-partition-mapping"><h3>make-partition-mapping</h3><div class="usage"><code>(make-partition-mapping coll)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L998">view source</a></div></div><div class="public anchor" id="var-make-pipeline"><h3>make-pipeline</h3><h4 class="type">macro</h4><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(make-pipeline &amp; args)</code></div><div class="doc"><pre class="plaintext">Builds a Pipeline from command lines args and configuration. Also accepts a jobNameTemplate param which is a string in which the following var are interpolated:
  - %A -&gt; Application name
  - %U -&gt; User name
  - %T -&gt; Timestamp
It means the template %A-%U-%T is equivalent to the default jobName</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L727">view source</a></div></div><div class="public anchor" id="var-map"><h3>map</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(map f pcoll)</code><code>(map f options pcoll)</code></div><div class="doc"><pre class="plaintext">Returns a PCollection of f applied to every item in the source PCollection.
Function f should be a function of one argument.

  Example:
    (ds/map inc foo)
    (ds/map (fn [x] (* x x)) foo)

  Note: Unlike clojure.core/map, datasplash.api/map takes only one PCollection.

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.
:name =&gt; Adds a name to the Transform.
:side-inputs =&gt; Adds a map of PCollectionViews as side inputs to the underlying ParDo Transform. They can be accessed there by key in the return of side-inputs fn.
:without-coercion-to-clj =&gt; Avoids coercing Dataflow types to Clojure, like KV. Coercion will happen by default</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L371">view source</a></div></div><div class="public anchor" id="var-map-kv"><h3>map-kv</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(map-kv f pcoll)</code><code>(map-kv f options pcoll)</code></div><div class="doc"><pre class="plaintext">Returns a KV PCollection of f applied to every item in the source PCollection.
Function f should be a function of one argument and return seq of keys/values.

  Example:
    (ds/map (fn [{:keys [month revenue]}] [month revenue]) foo)

  Note: Unlike clojure.core/map, datasplash.api/map-kv takes only one PCollection.

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.
:name =&gt; Adds a name to the Transform.
:side-inputs =&gt; Adds a map of PCollectionViews as side inputs to the underlying ParDo Transform. They can be accessed there by key in the return of side-inputs fn.
:without-coercion-to-clj =&gt; Avoids coercing Dataflow types to Clojure, like KV. Coercion will happen by default</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L387">view source</a></div></div><div class="public anchor" id="var-mapcat"><h3>mapcat</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(mapcat f pcoll)</code><code>(mapcat f options pcoll)</code></div><div class="doc"><pre class="plaintext">Returns the result of applying concat, or flattening, the result of applying
f to each item in the PCollection. Thus f should return a Clojure or Java collection.

  Example:

    (ds/mapcat (fn [x] [(dec x) x (inc x)]) foo)

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.
:name =&gt; Adds a name to the Transform.
:side-inputs =&gt; Adds a map of PCollectionViews as side inputs to the underlying ParDo Transform. They can be accessed there by key in the return of side-inputs fn.
:without-coercion-to-clj =&gt; Avoids coercing Dataflow types to Clojure, like KV. Coercion will happen by default</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L402">view source</a></div></div><div class="public anchor" id="var-max-fn"><h3>max-fn</h3><div class="usage"><code>(max-fn &amp; {:keys [mapper predicate], :or {mapper identity, predicate (constantly true)}})</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1326">view source</a></div></div><div class="public anchor" id="var-mean-fn"><h3>mean-fn</h3><div class="usage"><code>(mean-fn &amp; {:keys [mapper predicate], :or {mapper identity, predicate (constantly true)}})</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1311">view source</a></div></div><div class="public anchor" id="var-min-fn"><h3>min-fn</h3><div class="usage"><code>(min-fn &amp; {:keys [mapper predicate], :or {mapper identity, predicate (constantly true)}})</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1342">view source</a></div></div><div class="public anchor" id="var-pardo"><h3>pardo</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(pardo f pcoll)</code><code>(pardo f options pcoll)</code></div><div class="doc"><pre class="plaintext">Uses a raw pardo-fn as a ppardo transform
Function f should be a function of one argument, the Pardo$Context object.

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.
:name =&gt; Adds a name to the Transform.
:side-inputs =&gt; Adds a map of PCollectionViews as side inputs to the underlying ParDo Transform. They can be accessed there by key in the return of side-inputs fn.
:without-coercion-to-clj =&gt; Avoids coercing Dataflow types to Clojure, like KV. Coercion will happen by default</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L361">view source</a></div></div><div class="public anchor" id="var-partition-by"><h3>partition-by</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(partition-by f num options pcoll)</code><code>(partition-by f num pcoll)</code></div><div class="doc"><pre class="plaintext">Partions the content of pacoll according to the PartitionFn.
See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Partition">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Partition</a>

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.
:name =&gt; Adds a name to the Transform.</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L545">view source</a></div></div><div class="public anchor" id="var-partition-fn"><h3>partition-fn</h3><div class="usage"><code>(partition-fn f)</code></div><div class="doc"><pre class="plaintext">Returns a Partition.PartitionFn if possible
</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L534">view source</a></div></div><div class="public anchor" id="var-ptransform"><h3>ptransform</h3><h4 class="type">macro</h4><div class="usage"><code>(ptransform nam input &amp; body)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L630">view source</a></div></div><div class="public anchor" id="var-read-edn-file"><h3>read-edn-file</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(read-edn-file from options p)</code><code>(read-edn-file from p)</code></div><div class="doc"><pre class="plaintext">Reads a PCollection of edn strings from disk or Google Storage, with records separated by newlines.
See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Read.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Read.html</a>

  Example:
    (read-edn-file &quot;gs://target/path&quot; pcoll)

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.
:compression-type =&gt; Choose compression type. :auto by default. one of (:auto :bzip2 :gzip :uncompressed).
:without-validation =&gt; Disables validation of path existence in Google Cloud Storage until runtime.</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L886">view source</a></div></div><div class="public anchor" id="var-read-json-file"><h3>read-json-file</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(read-json-file from options p)</code><code>(read-json-file from p)</code></div><div class="doc"><pre class="plaintext">Reads a PCollection of JSON strings from disk or Google Storage, with records separated by newlines.
See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Read.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Read.html</a> and <a href="https://github.com/dakrone/cheshire#decoding">https://github.com/dakrone/cheshire#decoding</a> for details on options.

  Example:
    (read-json-file &quot;gs://target/path&quot; pcoll)

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.
:compression-type =&gt; Choose compression type. :auto by default. one of (:auto :bzip2 :gzip :uncompressed).
:key-fn =&gt; Selects a policy for parsing map keys. If true, keywordizes the keys. If given a fn, uses it to transform each map key.
:return-type =&gt; Allows passing in a function to specify what kind of types to return.
:without-validation =&gt; Disables validation of path existence in Google Cloud Storage until runtime.</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L949">view source</a></div></div><div class="public anchor" id="var-read-text-file"><h3>read-text-file</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(read-text-file from options p)</code><code>(read-text-file from p)</code></div><div class="doc"><pre class="plaintext">Reads a PCollection of Strings from disk or Google Storage, with records separated by newlines.
See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Read.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Read.html</a>

  Example:
    (read-text-file &quot;gs://target/path&quot; pcoll)

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.
:compression-type =&gt; Choose compression type. :auto by default. one of (:auto :bzip2 :gzip :uncompressed).
:without-validation =&gt; Disables validation of path existence in Google Cloud Storage until runtime.</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L855">view source</a></div></div><div class="public anchor" id="var-run-pipeline"><h3>run-pipeline</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(run-pipeline topology)</code></div><div class="doc"><pre class="plaintext">Run the computation for a given pipeline or PCollection.
</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L738">view source</a></div></div><div class="public anchor" id="var-sample"><h3>sample</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(sample size {:keys [scope], :as options} pcoll)</code><code>(sample size pcoll)</code></div><div class="doc"><pre class="plaintext">Takes samples of the elements in a PCollection, or samples of the values associated with each key in a PCollection of KVs.
See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Sample.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/Sample.html</a>

  Example:
    (ds/sample 100 {:scope :per-key} pcoll)

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.
:scope =&gt; Scope given to the combinating operation. One of (:globally :per-key).</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1180">view source</a></div></div><div class="public anchor" id="var-sfn"><h3>sfn</h3><div class="usage"><code>(sfn f)</code></div><div class="doc"><pre class="plaintext">Returns an instance of SerializableFunction equivalent to f.
</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L522">view source</a></div></div><div class="public anchor" id="var-side-inputs"><h3>side-inputs</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(side-inputs)</code></div><div class="doc"><pre class="plaintext">In the context of a ParDo, returns the corresponding side inputs as a map from names to values.
Example:
  (let [input (ds/generate-input [1 2 3 4 5] p)
        side-input (ds/view (ds/generate-input [{1 :a 2 :b 3 :c 4 :d 5 :e}] p))
        proc (ds/map (fn [x] (get-in (ds/side-inputs) [:mapping x]))
                     {:side-inputs {:mapping side-input}} input)])</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L179">view source</a></div></div><div class="public anchor" id="var-sum-fn"><h3>sum-fn</h3><div class="usage"><code>(sum-fn &amp; {:keys [mapper predicate], :or {mapper identity, predicate (constantly true)}})</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1299">view source</a></div></div><div class="public anchor" id="var-to-edn"><h3>to-edn</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L519">view source</a></div></div><div class="public anchor" id="var-val"><h3>val</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(val elt)</code></div><div class="doc"><pre class="plaintext">Returns the value part of a KV or MapEntry.
</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L134">view source</a></div></div><div class="public anchor" id="var-view"><h3>view</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(view {:keys [type], :or {type :singleton}, :as options} pcoll)</code><code>(view pcoll)</code></div><div class="doc"><pre class="plaintext">Produces a View out of a PColl, to be later consumed as a side-input for example. See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/">https://cloud.google.com/dataflow/java-sdk/JavaDoc/</a>

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.
:default =&gt; Sets a default value for SingletonView
:type =&gt; One of :singleton, :iterable, :list, :map or :multi-map. Defaults to :singleton</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L494">view source</a></div></div><div class="public anchor" id="var-walk-gcs-tree"><h3>walk-gcs-tree</h3><div class="usage"><code>(walk-gcs-tree options input)</code><code>(walk-gcs-tree options)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L777">view source</a></div></div><div class="public anchor" id="var-with-keys"><h3>with-keys</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(with-keys f {:keys [key-coder value-coder coder], :as options} pcoll)</code><code>(with-keys f pcoll)</code></div><div class="doc"><pre class="plaintext">Returns a PCollection of KV by applying f on each element of the input PColelction and using the return value as the key and the element as the value.
  See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/WithKeys.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/transforms/WithKeys.html</a>

  Example:
    (with-keys even? pcoll)

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.
:key-coder =&gt; Coder to be used for encoding keys in the resulting KV PColl.
:value-coder =&gt; Coder to be used for encoding values in the resulting KV PColl.</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L600">view source</a></div></div><div class="public anchor" id="var-write-edn-file"><h3>write-edn-file</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(write-edn-file to options pcoll)</code><code>(write-edn-file to pcoll)</code></div><div class="doc"><pre class="plaintext">Writes a PCollection of data to disk or Google Storage, with edn records separated by newlines.
See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Write.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Write.html</a>

  Example:
    (write-edn-file &quot;gs://target/path&quot; pcoll)

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.
:num-shards =&gt; Selects the desired number of output shards (file fragments). 0 to let the system decide (recommended).
:shard-name-template =&gt; Uses the given shard name template.
:suffix =&gt; Uses the given filename suffix.
:without-sharding =&gt; Forces a single file output.
:without-validation =&gt; Disables validation of path existence in Google Cloud Storage until runtime.</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L913">view source</a></div></div><div class="public anchor" id="var-write-edn-file-by"><h3>write-edn-file-by</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1033">view source</a></div></div><div class="public anchor" id="var-write-json-file"><h3>write-json-file</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(write-json-file to options pcoll)</code><code>(write-json-file to pcoll)</code></div><div class="doc"><pre class="plaintext">Writes a PCollection of data to disk or Google Storage, with JSON records separated by newlines.
See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Write.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Write.html</a> and <a href="https://github.com/dakrone/cheshire#encoding">https://github.com/dakrone/cheshire#encoding</a> for details on options

  Example:
    (write-json-file &quot;gs://target/path&quot; pcoll)

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.
:date-format =&gt; Pattern for encoding java.util.Date objects. Defaults to yyyy-MM-dd&apos;T&apos;HH:mm:ss&apos;Z&apos;
:escape-non-ascii =&gt; Generate JSON escaping UTF-8.
:key-fn =&gt; Generate JSON and munge keys with a custom function.
:num-shards =&gt; Selects the desired number of output shards (file fragments). 0 to let the system decide (recommended).
:shard-name-template =&gt; Uses the given shard name template.
:suffix =&gt; Uses the given filename suffix.
:without-sharding =&gt; Forces a single file output.
:without-validation =&gt; Disables validation of path existence in Google Cloud Storage until runtime.</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L982">view source</a></div></div><div class="public anchor" id="var-write-text-file"><h3>write-text-file</h3><h4 class="added">added in 0.1.0</h4><div class="usage"><code>(write-text-file to options pcoll)</code><code>(write-text-file to pcoll)</code></div><div class="doc"><pre class="plaintext">Writes a PCollection of Strings to disk or Google Storage, with records separated by newlines.
See <a href="https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Write.html">https://cloud.google.com/dataflow/java-sdk/JavaDoc/com/google/cloud/dataflow/sdk/io/TextIO.Write.html</a>

  Example:
    (write-text-file &quot;gs://target/path&quot; pcoll)

Available options:
:coder =&gt; Uses a specific Coder for the results of this transform. Usually defaults to some form of nippy-coder.
:num-shards =&gt; Selects the desired number of output shards (file fragments). 0 to let the system decide (recommended).
:shard-name-template =&gt; Uses the given shard name template.
:suffix =&gt; Uses the given filename suffix.
:without-sharding =&gt; Forces a single file output.
:without-validation =&gt; Disables validation of path existence in Google Cloud Storage until runtime.</pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L837">view source</a></div></div><div class="public anchor" id="var-write-text-file-by"><h3>write-text-file-by</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ngrunwald/datasplash/blob/master/src/datasplash/core.clj#L1034">view source</a></div></div></div></body></html>